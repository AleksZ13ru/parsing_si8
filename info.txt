owen_protocol.c - исходный файл реализации протокола с форума овен
own.c - рабочий исходник
own.so - скомпилированная библиотека для Linux



Компиляция динамической библиотеки для Linux
	1. gcc -fPIC -c -имя файла-.c
	В результате компиляции получится промежуточный файл -имя файла-.o  
	2. gcc -shared -o -имя библиотеки-.so -имя файла-.o
	В итоге получим рабочую библиотеку -имя библиотеки-.so

Компиляция динамической библиотеки для Windows
	1. Установить MinGW, скачать базовый пакет компанентов
	1. gcc -c own.c -o own.o
	В результате компиляции получится промежуточный файл own.o  
	2. gcc -shared -o own.dll own.o
	В итоге получим рабочую библиотеку own.dll

полученная библиотека не работает под python3.4!, ошибка на 120 строке own.c


####################################################################################
24.01.16
Проект написан Ванатовым Сергеем, проверена практическая работа с протаколами овен и модбас
основной файл main.py

17.05.16 - среда выполнения 2.7
При запуске кода на raspberryPi были выявлены недочеты в коде программы:

Неправильное имя подключаемой библиотеки convert, которая ошибочно мной была определена как стороняя библиотека bcd. Вызывалась в owen.py - исправленно

Скомпилированная библиотека owen.so - не работает на малинке, необходимо компилировать на исполняемой платформе.

Программа не читала значения от си8 на скоростях 9600 и 4200.
Вылечено обновлением pyserial, команда: sudo apt-get install pyserial --updates !-перепроверить!

Для файла .so- необходимо право на выполнение, команда:

#####################################################################################
01.08.16
main_parsing_db.py  скрипт парсинга файлов архива шестеренки python3.5
main_read_si8.py    скрипт опроса счетчика(windows, linux) python2.7

7:30
h:    d:			Speed:
h37 - 55	00 00 80 3f	1,00

h42 - 66	e2 7a ac 40	5,39

h63 - 99	9a 99 39 40	2,90

h7f - 127	0a d7 a3 3d	4,80

h97 - 151	60 e5 d0 3d	0,10

h9a - 154	00 00 cd 43	410

hc6 - 198	00 00 20 41	10

owen protacol

#GHGKSHNJIGGGGGHOUPQU	=0.18 - строка полученная от si8, значение счетчика 0,18

		Формат файла данных счетчиков СИ8. (ddmmyy.sin) (n=номер машины)

	№		bytes
	1		1			- кол-во счетчиков
	2		1			- час
	3		1			- минута
	-----------------------------------------------
	4		1			- номер счетчика
	5-8		4			- показания счетчика
	...


		Формат файла лога счетчиков СИ8. (ddmmyy.lon) (n=номер машины)

	№		bytes
	1		1			- час
	2		1			- минута
	3		1			- кол-во счетчиков
	-----------------------------------------------
	4		1			- событие для счетчика по адр. 0
	5		1			- событие для счетчика по адр. 1
	...

	коды событий:
	0 - нет ответа от счетчика
	1 - счетчик отвечает, значение = 0
	2 - счетчик отвечает, значение > 0
	3 - счетчик отвечает, не удалось получить ответ без ошибок CRC
	4 - счетчик отвечает, были ответы с ошибками crc, удалось получить ответ
	5 - счетчик отвечает, не удалось получить символ конца строки
	6 - ответ принят после повторного опроса, значение = 0
	7 - ответ принят после повторного опроса, значение > 0
	8 - перезагрузка в момент опроса
